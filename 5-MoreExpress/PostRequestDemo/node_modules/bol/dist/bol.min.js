const bolVoices={"UK English Female":[0,1,2,3,4,5,6],"UK English Male":[7,8,9,10,11,12,13],"US English Female":[14,15,16,17,18,19,20],"US English Male":[7,8,9,10,11,12,13]},fallbacks=[{name:"Google UK English Female"},{name:"en-AU",rate:.25,pitch:1},{name:"Agnes"},{name:"inglés Reino Unido"},{name:"English United Kingdom"},{name:"English United Kingdom",lang:"en_GB"},{name:"Fallback en-GB Female",lang:"en-GB",fallbackvoice:!0},{name:"Google UK English Male"},{name:"en-GB",rate:.25,pitch:1},{name:"Daniel Compact"},{name:"inglés Reino Unido"},{name:"English United Kingdom"},{name:"Daniel"},{name:"Fallback UK English Male",lang:"en-GB",fallbackvoice:!0,service:"g1",voicename:"rjs"},{name:"Google US English",timerSpeed:1},{name:"English United States"},{name:"inglés Estados Unidos"},{name:"Vicki"},{name:"en-US",rate:.2,pitch:1,timerSpeed:1.3},{name:"English United States",lang:"en_US"},{name:"Fallback English",lang:"en-US",fallbackvoice:!0,timerSpeed:0}];function getFallbackVoices(e){return bolVoices[e]?bolVoices[e].map(e=>fallbacks[e]):[fallbacks[0]]}function getCommonVoice(e,i){for(let n of e){let e=i.find(e=>e.name===n.name);if(e)return e}}async function wait(e){return new Promise(i=>{setTimeout(()=>i(),e)})}function getSupportedVoice(e,i){return getCommonVoice(getFallbackVoices(e),i)}let retriesToSpeak=0;class Bol{constructor(e="UK English Female",{rate:i,pitch:n,volume:t}={rate:1,pitch:1,volume:1}){this.systemVoices=[],this.rate=i,this.pitch=n,this.volume=t,Object.keys(bolVoices).includes(e)?this.defaultVoice=e:this.defaultVoice="UK English Female",this.init(),this.speak=this.speak.bind(this),this.init=this.init.bind(this),speechSynthesis.onvoiceschanged=this.init}init(){"undefined"!=typeof speechSynthesis&&(this.systemVoices=speechSynthesis.getVoices())}async speak(e,i=null){if(0===this.systemVoices.length&&retriesToSpeak<10)return await wait(600),retriesToSpeak++,this.speak(e,i);const n=getSupportedVoice(i||this.defaultVoice,this.systemVoices);console.log(this.defaultVoice);const t=new SpeechSynthesisUtterance(e);return t.voice=n||"",t.voiceURI=n.voiceURI||"",t.volume=void 0===this.volume||null===this.volume?1:this.volume,t.rate=void 0===this.rate||null===this.rate?.8:this.rate,t.pitch=void 0===this.pitch||null===this.pitch?1:this.pitch,t.text=e,t.lang=n.lang||"en-US",speechSynthesis.speak(t),new Promise(e=>{t.onend=i=>{e(i.elapsedTime)}})}}